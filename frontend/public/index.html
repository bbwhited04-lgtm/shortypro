<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShortyPro — Short Links that Sell</title>
  <meta name="description" content="ShortyPro helps creators and businesses shorten links, track clicks, and sell with Stripe-powered checkout." />
  <meta name="theme-color" content="#0b0f19" />

  <style>
    :root{
      --bg:#0b0f19; --card:#121a2b; --card2:#0f1627;
      --text:#e8eefc; --muted:#aab6d6; --line:rgba(255,255,255,.10);
      --accent:#6ea8ff; --accent2:#73f1c8; --warn:#ffcc66; --danger:#ff6b6b;
      --radius:18px;
      --shadow: 0 20px 50px rgba(0,0,0,.35);
      --shadow2: 0 10px 30px rgba(0,0,0,.25);
      --max: 1100px;
      font-synthesis-weight: none;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1100px 600px at 20% -10%, rgba(110,168,255,.25), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(115,241,200,.18), transparent 60%),
        radial-gradient(1200px 800px at 50% 110%, rgba(110,168,255,.10), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:0 18px}
    .topbar{
      position:sticky; top:0; z-index:30;
      backdrop-filter: blur(14px);
      background: rgba(11,15,25,.72);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:14px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}
    .logo{
      width:34px; height:34px; border-radius:12px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: var(--shadow2);
      display:inline-block;
    }
    .navlinks{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
    .navlinks a{
      color:var(--muted);
      padding:9px 10px; border-radius:12px;
      transition: all .15s ease;
    }
    .navlinks a:hover{background:rgba(255,255,255,.06); color:var(--text)}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px; padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:700;
      cursor:pointer;
      transition: transform .08s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      border-color: rgba(110,168,255,.45);
      background: linear-gradient(135deg, rgba(110,168,255,.22), rgba(115,241,200,.16));
    }
    .btn.primary:hover{border-color: rgba(115,241,200,.55)}
    .btn.danger{border-color: rgba(255,107,107,.45)}
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      color:var(--muted);
      background: rgba(255,255,255,.03);
      font-size:13px;
    }
    header.hero{padding:58px 0 26px}
    .heroGrid{
      display:grid; grid-template-columns: 1.15fr .85fr; gap:20px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .heroGrid{grid-template-columns:1fr; }
    }
    h1{
      margin:14px 0 10px;
      font-size: clamp(34px, 3.8vw, 52px);
      line-height:1.04;
      letter-spacing:-.6px;
    }
    .sub{
      color:var(--muted);
      font-size:16px;
      line-height:1.6;
      max-width: 56ch;
    }
    .heroActions{display:flex; gap:12px; margin-top:18px; flex-wrap:wrap}
    .card{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
    }
    .cardPad{padding:18px}
    .kpis{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .kpi{
      border:1px solid var(--line);
      border-radius: 16px;
      background: rgba(15,22,39,.6);
      padding:14px;
    }
    .kpi .num{font-weight:900; font-size:22px}
    .kpi .lab{color:var(--muted); margin-top:4px; font-size:13px}
    .note{color:var(--muted); font-size:13px; margin-top:10px}
    .section{padding:28px 0}
    .section h2{
      margin:0 0 10px;
      font-size: clamp(22px, 2.6vw, 30px);
      letter-spacing:-.2px;
    }
    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap:14px}
    @media (max-width: 980px){ .grid3{grid-template-columns:1fr} }
    .feature{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(18,26,43,.55);
      padding:16px;
    }
    .feature b{display:block; margin:2px 0 6px}
    .feature p{margin:0; color:var(--muted); line-height:1.6}
    .pricingWrap{display:grid; grid-template-columns: repeat(3,1fr); gap:14px; margin-top:12px}
    @media (max-width: 980px){ .pricingWrap{grid-template-columns:1fr} }
    .priceCard{
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(18,26,43,.60);
      padding:16px;
      position:relative;
      overflow:hidden;
    }
    .priceCard.reco{
      border-color: rgba(115,241,200,.35);
      box-shadow: 0 20px 60px rgba(115,241,200,.10);
    }
    .badge{
      position:absolute; top:14px; right:14px;
      font-size:12px; font-weight:800;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(115,241,200,.12);
      border:1px solid rgba(115,241,200,.30);
      color:var(--text);
    }
    .priceTop{display:flex; align-items:flex-end; justify-content:space-between; gap:10px}
    .plan{font-weight:900; font-size:18px}
    .price{font-weight:900; font-size:26px}
    .per{color:var(--muted); font-size:13px}
    ul{margin:12px 0 0; padding-left:18px; color:var(--muted); line-height:1.7}
    .priceActions{display:flex; gap:10px; margin-top:14px; flex-wrap:wrap}
    .footer{
      padding:28px 0 40px;
      border-top: 1px solid var(--line);
      color: var(--muted);
      font-size: 13px;
    }
    .toast{
      position: fixed; left: 50%; transform: translateX(-50%);
      bottom: 18px; z-index: 60;
      max-width: min(680px, 92vw);
      background: rgba(15,22,39,.92);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px 14px;
      box-shadow: var(--shadow);
      display:none;
    }
    .toast.show{display:block}
    .toast b{color:var(--text)}
    .toast .muted{color:var(--muted)}
    code.inline{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.05);
      color: var(--text);
    }
  </style>
</head>

<body>
  <!--
    IMPORTANT: Paste your REAL Stripe price IDs here.
    You said you already had them earlier — put them in this one block.
  -->
  <script>
    window.SHORTYPRO = {
      // Backend base URL (Render)
      API_BASE_URL: "https://shortypro.onrender.com",

      // Stripe Price IDs (replace with your real values)
      PRICES: {
        starter: "price_REprice_1SuNTiKC49F2A9OzFrSyGVgv",
        pro: "pricprice_1SuNYQKC49F2A9OzvS6LqMtM",
        agency: "priprice_1SuNclKC49F2A9OzqI4kLooj"
      }
    };
  </script>

  <div class="topbar">
    <div class="container">
      <div class="nav">
        <div class="brand">
          <span class="logo" aria-hidden="true"></span>
          <span>ShortyPro</span>
          <span class="pill">short links • tracking • stripe</span>
        </div>

        <div class="navlinks">
          <a href="#features">Features</a>
          <a href="#pricing">Pricing</a>
          <a href="#faq">FAQ</a>
          <a class="btn" href="https://shortypro-c64p.vercel.app" target="_blank" rel="noopener noreferrer">App</a>
          <button class="btn primary" onclick="scrollToPricing()">Get Started</button>
        </div>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="container">
      <div class="heroGrid">
        <div>
          <div class="pill">Clean • Modern • Trustworthy</div>
          <h1>Short links that actually make you money.</h1>
          <p class="sub">
            ShortyPro is built for creators and businesses who need clean short links, click tracking,
            and Stripe checkout that just works.
          </p>
          <div class="heroActions">
            <button class="btn primary" onclick="scrollToPricing()">See Plans</button>
            <a class="btn" href="https://www.shortypro.com" target="_blank" rel="noopener noreferrer">shortypro.com</a>
            <a class="btn" href="https://shortypro.onrender.com" target="_blank" rel="noopener noreferrer">Render API</a>
          </div>

          <p class="note">
            Tip: if checkout buttons don’t redirect, open DevTools Console — this page will show you exactly what’s missing.
          </p>
        </div>

        <div class="card">
          <div class="cardPad">
            <div class="priceTop" style="margin-bottom:10px">
              <div>
                <div class="plan">Live Status</div>
                <div class="per">Frontend + Backend connectivity</div>
              </div>
              <button class="btn" onclick="runHealthCheck()">Run Check</button>
            </div>

            <div class="kpis">
              <div class="kpi">
                <div class="num" id="kpi-api">—</div>
                <div class="lab">API Health</div>
              </div>
              <div class="kpi">
                <div class="num" id="kpi-price">—</div>
                <div class="lab">Price IDs</div>
              </div>
            </div>

            <div class="note">
              API Base: <code class="inline" id="apiBaseLabel">—</code>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section class="section" id="features">
    <div class="container">
      <h2>What you get</h2>
      <div class="grid3">
        <div class="feature">
          <b>Fast short links</b>
          <p>Create clean short URLs that look professional across social platforms.</p>
        </div>
        <div class="feature">
          <b>Click tracking</b>
          <p>Know what’s working: views, clicks, and referrers in one place.</p>
        </div>
        <div class="feature">
          <b>Stripe checkout</b>
          <p>Turn traffic into revenue with simple plan buttons wired to Stripe.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="pricing">
    <div class="container">
      <h2>Pricing</h2>
      <p class="sub">Choose a plan. Checkout will open in a new tab (or redirect) using your Render backend.</p>

      <div class="pricingWrap">
        <div class="priceCard">
          <div class="plan">Starter</div>
          <div class="priceTop">
            <div class="price">$9</div>
            <div class="per">per month</div>
          </div>
          <ul>
            <li>Basic short links</li>
            <li>Light tracking</li>
            <li>Email support</li>
          </ul>
          <div class="priceActions">
            <button class="btn primary" onclick="startCheckout('starter')">Buy Starter</button>
            <button class="btn" onclick="copyPriceId('starter')">Copy priceId</button>
          </div>
        </div>

        <div class="priceCard reco">
          <div class="badge">Most Popular</div>
          <div class="plan">Pro</div>
          <div class="priceTop">
            <div class="price">$29</div>
            <div class="per">per month</div>
          </div>
          <ul>
            <li>Everything in Starter</li>
            <li>Better analytics</li>
            <li>Priority support</li>
          </ul>
          <div class="priceActions">
            <button class="btn primary" onclick="startCheckout('pro')">Buy Pro</button>
            <button class="btn" onclick="copyPriceId('pro')">Copy priceId</button>
          </div>
        </div>

        <div class="priceCard">
          <div class="plan">Agency</div>
          <div class="priceTop">
            <div class="price">$99</div>
            <div class="per">per month</div>
          </div>
          <ul>
            <li>Multiple brands/projects</li>
            <li>Advanced tracking</li>
            <li>White-glove onboarding</li>
          </ul>
          <div class="priceActions">
            <button class="btn primary" onclick="startCheckout('agency')">Buy Agency</button>
            <button class="btn" onclick="copyPriceId('agency')">Copy priceId</button>
          </div>
        </div>
      </div>

      <div class="note">
        Checkout endpoint expected: <code class="inline">POST /stripe/create-checkout-session</code> with body <code class="inline">{ "priceId": "price_..." }</code>
      </div>
    </div>
  </section>

  <section class="section" id="faq">
    <div class="container">
      <h2>FAQ</h2>
      <div class="grid3">
        <div class="feature">
          <b>Why are buttons not redirecting?</b>
          <p>Usually the priceId is missing, or the frontend is calling the wrong backend URL. This page warns you in the console.</p>
        </div>
        <div class="feature">
          <b>Vercel vs Render?</b>
          <p>Host frontend on Vercel (fast), backend on Render. This file uses Render as API_BASE_URL by default.</p>
        </div>
        <div class="feature">
          <b>Test vs Live IDs?</b>
          <p>Make sure your Price IDs match the Stripe secret key environment (test with test, live with live).</p>
        </div>
      </div>
    </div>
  </section>

  <div class="footer">
    <div class="container" style="display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap">
      <div>© <span id="year"></span> ShortyPro</div>
      <div style="display:flex; gap:10px; flex-wrap:wrap">
        <a class="pill" href="https://www.instagram.com/shortypro2" target="_blank" rel="noopener noreferrer">Instagram</a>
        <a class="pill" href="https://x.com/shortypro2" target="_blank" rel="noopener noreferrer">X</a>
        <a class="pill" href="https://www.threads.com/@shortypro2" target="_blank" rel="noopener noreferrer">Threads</a>
        <a class="pill" href="https://www.facebook.com/profile.php?id=61587277436466" target="_blank" rel="noopener noreferrer">Facebook</a>
        <a class="pill" href="https://www.youtube.com/channel/UCmbX7LCkJK_8YmuRwUKfKGQ" target="_blank" rel="noopener noreferrer">YouTube</a>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">
    <div><b id="toastTitle">Notice</b></div>
    <div class="muted" id="toastBody"></div>
  </div>

  <script>
    document.getElementById("year").textContent = String(new Date().getFullYear());

    function scrollToPricing(){ document.getElementById("pricing").scrollIntoView({behavior:"smooth", block:"start"}); }

    function toast(title, body){
      const t = document.getElementById("toast");
      document.getElementById("toastTitle").textContent = title;
      document.getElementById("toastBody").textContent = body;
      t.classList.add("show");
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(()=>t.classList.remove("show"), 5200);
    }

    function getApiBase(){
      const base = (window.SHORTYPRO && window.SHORTYPRO.API_BASE_URL) ? window.SHORTYPRO.API_BASE_URL : "";
      return String(base || "").replace(/\/+$/,"");
    }

    function getPriceId(planKey){
      return window.SHORTYPRO?.PRICES?.[planKey];
    }

    function validatePrices(){
      const keys = ["starter","pro","agency"];
      const missing = keys.filter(k => !getPriceId(k) || !String(getPriceId(k)).startsWith("price_"));
      return { ok: missing.length === 0, missing };
    }

    async function runHealthCheck(){
      const apiBase = getApiBase();
      document.getElementById("apiBaseLabel").textContent = apiBase || "NOT SET";

      const priceStatus = validatePrices();
      document.getElementById("kpi-price").textContent = priceStatus.ok ? "OK" : "MISSING";
      if (!priceStatus.ok){
        console.warn("Missing/invalid price IDs for:", priceStatus.missing);
        toast("Price IDs missing", "Open index.html and replace price_REPLACE_ME_* with your real Stripe price IDs.");
      }

      if (!apiBase){
        document.getElementById("kpi-api").textContent = "NO BASE";
        toast("API Base not set", "Set SHORTYPRO.API_BASE_URL at the top of this file to your Render backend URL.");
        return;
      }

      try{
        const r = await fetch(apiBase + "/health", { method:"GET" });
        if (r.ok){
          document.getElementById("kpi-api").textContent = "OK";
          toast("API OK", "Backend /health responded successfully.");
        } else {
          document.getElementById("kpi-api").textContent = "ERR";
          toast("API error", "Backend responded but not OK. Check Render logs + route exists: /health");
        }
      } catch(e){
        console.error("Health check failed:", e);
        document.getElementById("kpi-api").textContent = "DOWN";
        toast("API unreachable", "Frontend could not reach Render. Confirm API_BASE_URL + CORS + service is running.");
      }
    }

    async function startCheckout(planKey){
      const apiBase = getApiBase();
      const priceId = getPriceId(planKey);

      if (!apiBase){
        toast("Missing API base", "Set SHORTYPRO.API_BASE_URL in the script at the top of the file.");
        return;
      }

      if (!priceId || !String(priceId).startsWith("price_")){
        console.error("Bad priceId:", planKey, priceId);
        toast("Missing priceId", price_1SuNclKC49F2A9OzqI4kLooj");
        return;
      }

      const endpoint = apiBase + "/stripe/create-checkout-session";

      try{
        const res = await fetch(endpoint, {
          method: "POST",
          headers: { "Content-Type":"application/json" },
          body: JSON.stringify({ priceId })
        });

        const data = await res.json().catch(()=> ({}));
        if (!res.ok){
          console.error("Checkout failed:", res.status, data);
          toast("Checkout failed", "Backend returned an error. Open console + Render logs.");
          return;
        }

        const url = data.url || data.checkout_url;
        if (!url){
          console.error("No checkout url returned:", data);
          toast("No redirect URL", "Backend did not return { url }. Fix your Stripe endpoint response.");
          return;
        }

        // Redirect
        window.location.href = url;
      } catch(err){
        console.error("Checkout request error:", err);
        toast("Network error", "Could not call backend. Check API_BASE_URL and CORS.");
      }
    }

    async function copyPriceId(planKey){
      const id = getPriceId(planKey) || "";
      try{
        await navigator.clipboard.writeText(id);
        toast("Copied", id ? id : "No priceId set");
      } catch(e){
        toast("Copy failed", "Your browser blocked clipboard access.");
      }
    }

    // auto-run once for quick visibility
    runHealthCheck();
  </script>
</body>
</html>
